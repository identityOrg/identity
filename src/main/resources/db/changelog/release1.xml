<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd">
    <changeSet author="prasenjit-net" id="03032018-1">
        <createTable tableName="T_ACCESS_TOKEN">
            <column name="ACCESS_TOKEN" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="CLIENT_ID" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="CREATION_DATE" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="EXPIRY_DATE" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="SCOPE" type="VARCHAR(500)">
                <constraints nullable="false"/>
            </column>
            <column name="USER_PROFILE" type="BLOB">
                <constraints nullable="false"/>
            </column>
            <column name="USERNAME" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="prasenjit-net" id="03032018-2">
        <createTable tableName="T_AUTHORIZATION_CODE">
            <column name="AUTHORIZATION_CODE" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="CLIENT_ID" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="CREATION_DATE" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="EXPIRY_DATE" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="RETURN_URL" type="VARCHAR(500)"/>
            <column name="SCOPE" type="VARCHAR(500)">
                <constraints nullable="false"/>
            </column>
            <column name="STATE" type="VARCHAR(50)"/>
            <column name="USED" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="USERNAME" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="prasenjit-net" id="03032018-3">
        <createTable tableName="T_CLIENT">
            <column name="CLIENT_ID" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="ACCESS_TOKEN_VALIDITY" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="CLIENT_NAME" type="VARCHAR(500)">
                <constraints nullable="false"/>
            </column>
            <column name="CLIENT_SECRET" type="VARCHAR(50)"/>
            <column name="CREATION_DATE" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="EXPIRY_DATE" type="TIMESTAMP"/>
            <column name="REDIRECT_URI" type="VARCHAR(500)">
                <constraints nullable="false"/>
            </column>
            <column name="REFRESH_TOKEN_VALIDITY" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="STATUS" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="prasenjit-net" id="03032018-4">
        <createTable tableName="T_REFRESH_TOKEN">
            <column name="REFRESH_TOKEN" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="CLIENT_ID" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="CREATION_DATE" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="EXPIRY_DATE" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="SCOPE" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="USED" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="USERNAME" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="prasenjit-net" id="03032018-5">
        <createTable tableName="T_SCOPE">
            <column name="SCOPE_ID" type="VARCHAR(10)">
                <constraints nullable="false"/>
            </column>
            <column name="SCOPE_NAME" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="prasenjit-net" id="03032018-6">
        <createTable tableName="T_USER">
            <column name="USERNAME" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="ADMIN" type="BOOLEAN"/>
            <column name="CREATION_DATE" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="EXPIRY_DATE" type="TIMESTAMP"/>
            <column name="PASSWORD" type="VARCHAR(200)">
                <constraints nullable="false"/>
            </column>
            <column name="PASSWORD_EXPIRY_DATE" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="STATUS" type="VARCHAR(10)">
                <constraints nullable="false"/>
            </column>
            <column name="FIRST_NAME" type="VARCHAR(255)"/>
            <column name="LAST_NAME" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="prasenjit-net" id="03032018-7">
        <createTable tableName="T_E2E_KEY">
            <column name="ASSOCIATION" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="USER_TYPE" type="VARCHAR(10)">
                <constraints nullable="false"/>
            </column>
            <column name="CREATION_DATE" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="CURRENT_PRIVATE_KEY" type="CLOB">
                <constraints nullable="false"/>
            </column>
            <column name="CURRENT_PUBLIC_KEY" type="CLOB">
                <constraints nullable="false"/>
            </column>
            <column name="OLD_PRIVATE_KEY" type="CLOB"/>
            <column name="OLD_PUBLIC_KEY" type="CLOB"/>
        </createTable>
    </changeSet>
    <changeSet author="prasenjit-net" id="03032018-8">
        <createTable tableName="T_CLIENT_SCOPE">
            <column name="CLIENT_ID" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="SCOPE_ID" type="VARCHAR(10)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="prasenjit-net" id="03032018-20">
        <addPrimaryKey columnNames="ACCESS_TOKEN"
                       constraintName="T_ACCESS_TOKENPK" tableName="T_ACCESS_TOKEN"/>
    </changeSet>
    <changeSet author="prasenjit-net" id="03032018-21">
        <addPrimaryKey columnNames="AUTHORIZATION_CODE"
                       constraintName="T_AUTHORIZATION_CODEPK" tableName="T_AUTHORIZATION_CODE"/>
    </changeSet>
    <changeSet author="prasenjit-net" id="03032018-22">
        <addPrimaryKey columnNames="CLIENT_ID" constraintName="T_CLIENTPK"
                       tableName="T_CLIENT"/>
    </changeSet>
    <changeSet author="prasenjit-net" id="03032018-23">
        <addPrimaryKey columnNames="REFRESH_TOKEN"
                       constraintName="T_REFRESH_TOKENPK" tableName="T_REFRESH_TOKEN"/>
    </changeSet>
    <changeSet author="prasenjit-net" id="03032018-24">
        <addPrimaryKey columnNames="SCOPE_ID" constraintName="T_SCOPEPK"
                       tableName="T_SCOPE"/>
    </changeSet>
    <changeSet author="prasenjit-net" id="03032018-25">
        <addPrimaryKey columnNames="USERNAME" constraintName="T_USERPK"
                       tableName="T_USER"/>
    </changeSet>
    <changeSet author="prasenjit-net" id="03032018-26">
        <addUniqueConstraint columnNames="SCOPE_NAME"
                             constraintName="UC_T_SCOPESCOPE_NAME_COL" tableName="T_SCOPE"/>
    </changeSet>
    <changeSet author="prasenjit-net" id="03032018-27">
        <addPrimaryKey columnNames="ASSOCIATION, USER_TYPE" constraintName="T_E2E_KEYPK" tableName="T_E2E_KEY"/>
    </changeSet>
    <changeSet author="prasenjit-net" id="03032018-28">
        <addForeignKeyConstraint baseTableName="T_CLIENT_SCOPE" baseColumnNames="CLIENT_ID"
                                 constraintName="FK_CLIENT_SCOPE_CLIENT"
                                 referencedTableName="T_CLIENT"
                                 referencedColumnNames="CLIENT_ID"/>
        <addForeignKeyConstraint baseTableName="T_CLIENT_SCOPE" baseColumnNames="SCOPE_ID"
                                 constraintName="FK_CLIENT_SCOPE_SCOPE"
                                 referencedTableName="T_SCOPE"
                                 referencedColumnNames="SCOPE_ID"/>
    </changeSet>
</databaseChangeLog>
